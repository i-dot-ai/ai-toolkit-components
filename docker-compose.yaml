services:
  vector_db:
    build:
      context: ./components/vector_db
      dockerfile: Dockerfile
    image: vector_db:latest
    ports:
      - "${HTTP_PORT:-6333}:${HTTP_PORT:-6333}"
      - "${GRPC_PORT:-6334}:${GRPC_PORT:-6334}"
    volumes:
      - ./data/vector_db:/qdrant/storage
    environment:
      - HTTP_PORT
      - GRPC_PORT

  data_ingestor:
    build:
      context: ./components/data_ingestor
      dockerfile: Dockerfile
    image: data_ingestor:latest

  mcp_server:
    build:
      context: ./components/mcp_server
      dockerfile: Dockerfile
    image: mcp_server:latest
    ports:
      - "${MCP_PORT:-8080}:${MCP_PORT:-8080}"
    depends_on:
      - vector_db
    environment:
      - MCP_PORT
      - VECTOR_DB_HOST=vector_db
